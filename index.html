<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Green Track AI ğŸŒ¿</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@0,300;0,600;0,900;1,300&family=DM+Sans:wght@300;400;500;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="src/css/style.css">
</head>
<body>

<div class="toast" id="toast"></div>

<!-- MODAL -->
<div class="modal-overlay" id="modal" onclick="if(event.target===this)closeModal()">
  <div class="modal">
    <div class="modal-score" id="modal-score-ring">
      <span class="modal-score-num" id="modal-score-val">72</span>
      <span class="modal-score-label">SCORE</span>
    </div>
    <div class="modal-title" id="modal-title">HÃ´m nay báº¡n sá»‘ng khÃ¡ xanh!</div>
    <div class="modal-msg" id="modal-msg">Äang táº£i pháº£n há»“i tá»« AI...</div>
    <div class="modal-breakdown" id="modal-breakdown"></div>
    <button class="modal-btn" onclick="closeModal()">Tuyá»‡t! Vá» dashboard ğŸŒ¿</button>
  </div>
</div>

<!-- SHELL -->
<div class="shell">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="brand">
      <div class="brand-logo">ğŸŒ¿</div>
      <div class="brand-name">Green Track</div>
      <div class="brand-sub">AI Platform</div>
    </div>
    <nav class="nav">
      <button class="nav-item active" onclick="go('home',this)"><span class="nav-icon">ğŸ </span>Dashboard</button>
      <button class="nav-item" onclick="go('log',this)"><span class="nav-icon">âœï¸</span>Ghi hÃ´m nay</button>
      <button class="nav-item" onclick="go('analyze',this)"><span class="nav-icon">ğŸ“·</span>PhÃ¢n tÃ­ch rÃ¡c</button>
      <button class="nav-item" onclick="go('news',this)"><span class="nav-icon">ğŸŒ</span>Báº£n tin xanh</button>
      <button class="nav-item" onclick="go('rank',this)"><span class="nav-icon">ğŸ†</span>Xáº¿p háº¡ng</button>
      <button class="nav-item" onclick="go('profile',this)"><span class="nav-icon">ğŸ‘¤</span>Há»“ sÆ¡</button>
    </nav>
    <div style="padding:12px">
      <div class="sidebar-streak">
        <div class="streak-fire">ğŸ”¥</div>
        <div class="streak-num" id="sidebar-streak">12</div>
        <div class="streak-label">ngÃ y liÃªn tiáº¿p</div>
      </div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">

    <!-- ========== DASHBOARD ========== -->
    <div class="view active" id="view-home">
      <div class="hero">
        <div class="hero-pattern"></div>
        <div class="hero-label" id="hero-greeting">ChÃ o buá»•i sÃ¡ng â˜€ï¸</div>
        <div class="hero-title">Xin chÃ o, <em id="hero-name">TÃ¹ng LÃ¢m </em></div>
        <div class="hero-stats">
          <div class="stat-card">
            <div class="stat-ring-wrap">
              <svg viewBox="0 0 80 80" width="80" height="80">
                <circle class="ring-bg" cx="40" cy="40" r="33" fill="none" stroke-width="7"/>
                <circle class="ring-fill" id="score-ring" cx="40" cy="40" r="33" fill="none" stroke-width="7" stroke-dasharray="207.35" stroke-dashoffset="207.35"/>
              </svg>
              <div class="ring-num" id="score-num">0</div>
            </div>
            <div class="stat-label">Green Score</div>
          </div>
          <div class="impact-card">
            <div class="impact-row">
              <span class="impact-emoji">ğŸŒ³</span>
              <div><div class="impact-val" id="trees-num">0.0</div><div class="impact-desc">cÃ¢y xanh Ä‘Ã£ cá»©u</div></div>
            </div>
            <div class="impact-row">
              <span class="impact-emoji">ğŸ“‰</span>
              <div><div class="impact-val" id="co2-today">0.0</div><div class="impact-desc">kg COâ‚‚ hÃ´m nay</div></div>
            </div>
            <div class="impact-row">
              <span class="impact-emoji">â™»ï¸</span>
              <div><div class="impact-val" id="plastic-saved">0</div><div class="impact-desc">Ä‘á»“ nhá»±a tiáº¿t kiá»‡m</div></div>
            </div>
          </div>
        </div>
      </div>

      <div class="tip-float">
        <div class="tip-card">
          <div class="tip-bulb">ğŸ’¡</div>
          <div>
            <div class="tip-header">ğŸ¤– AI Tip hÃ´m nay</div>
            <div class="tip-text" id="tip-text">
              <div class="tip-loading"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
            </div>
          </div>
        </div>
      </div>

      <div class="section-pad">
        <div class="card" style="margin-bottom:14px">
          <div class="card-head">
            <div class="card-title">ğŸ“Š 7 ngÃ y qua</div>
            <div class="badge-pill up" id="trend-badge">â†‘ Cáº£i thiá»‡n</div>
          </div>
          <div class="chart-bars" id="chart-bars"></div>
          <div style="display:flex;justify-content:space-between;margin-top:10px">
            <span style="font-size:10px;color:var(--text-muted)">ğŸŸ¢ Tá»‘t &nbsp;ğŸŸ¡ TB &nbsp;ğŸ”´ Cao</span>
            <span style="font-size:10px;color:var(--text-muted);font-family:'Space Mono',monospace" id="week-avg">avg â€”</span>
          </div>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="card-head"><div class="card-title">ğŸ¯ Má»¥c tiÃªu</div><div class="badge-pill" id="goal-pct">0%</div></div>
            <div class="prog-label"><span>Giáº£m 20% COâ‚‚</span><span id="goal-val">0/20%</span></div>
            <div class="prog-track"><div class="prog-fill" id="goal-bar" style="width:0%"></div></div>
            <div style="background:linear-gradient(135deg,#e8f8f0,var(--mist));border-radius:10px;padding:10px 12px;margin-top:12px;font-size:12px;color:var(--canopy);font-weight:600">
              ğŸŒ² <span id="trees-progress">0.0 cÃ¢y xanh Ä‘Ã£ cá»©u!</span>
            </div>
          </div>
          <div class="card">
            <div class="card-head"><div class="card-title">ğŸ“ˆ So sÃ¡nh tuáº§n</div></div>
            <div style="text-align:center;padding:8px 0">
              <div style="font-family:'Space Mono',monospace;font-size:28px;font-weight:700;color:var(--canopy)" id="compare-pct">+0%</div>
              <div style="font-size:11px;color:var(--text-muted);margin-top:4px" id="compare-label">so vá»›i tuáº§n trÆ°á»›c</div>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px">
              <div style="background:var(--mist);border-radius:10px;padding:8px;text-align:center">
                <div style="font-family:'Space Mono',monospace;font-size:14px;font-weight:700;color:var(--canopy)" id="this-week-avg">0</div>
                <div style="font-size:9px;color:var(--text-muted)">tuáº§n nÃ y</div>
              </div>
              <div style="background:#fef6ed;border-radius:10px;padding:8px;text-align:center">
                <div style="font-family:'Space Mono',monospace;font-size:14px;font-weight:700;color:var(--amber)" id="last-week-avg">0</div>
                <div style="font-size:9px;color:var(--text-muted)">tuáº§n trÆ°á»›c</div>
              </div>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:14px">
          <div class="card-head"><div class="card-title">ğŸ… Huy hiá»‡u</div></div>
          <div class="badges-row" id="badges-row"></div>
        </div>

        <div class="card" style="margin-top:14px">
          <div class="card-head"><div class="card-title">âš¡ PhÃ¢n tÃ­ch hÃ´m nay</div></div>
          <div id="breakdown-list"></div>
        </div>
      </div>
    </div>

    <!-- ========== LOG ========== -->
    <div class="view" id="view-log">
      <div class="form-hero">
        <h1>âœï¸ Ghi nháº­t kÃ½ hÃ´m nay</h1>
        <p>Ghi láº¡i hoáº¡t Ä‘á»™ng Ä‘á»ƒ AI tÃ­nh COâ‚‚ vÃ  tÆ° váº¥n cáº£i thiá»‡n</p>
      </div>

      <div class="form-section">
        <div class="section-label">ğŸš— PhÆ°Æ¡ng tiá»‡n di chuyá»ƒn</div>
        <div class="opt-grid">
          <div class="opt-btn sel" onclick="select(this,'transport','walk')"><span class="opt-emoji">ğŸš¶</span><span class="opt-label">Äi bá»™</span></div>
          <div class="opt-btn" onclick="select(this,'transport','bicycle')"><span class="opt-emoji">ğŸš²</span><span class="opt-label">Xe Ä‘áº¡p</span></div>
          <div class="opt-btn" onclick="select(this,'transport','bus')"><span class="opt-emoji">ğŸšŒ</span><span class="opt-label">Xe buÃ½t</span></div>
          <div class="opt-btn" onclick="select(this,'transport','motorbike')"><span class="opt-emoji">ğŸ›µ</span><span class="opt-label">Xe mÃ¡y</span></div>
          <div class="opt-btn" onclick="select(this,'transport','car')"><span class="opt-emoji">ğŸš—</span><span class="opt-label">Ã” tÃ´</span></div>
        </div>

        <div class="section-label">ğŸ“ QuÃ£ng Ä‘Æ°á»ng (km)</div>
        <div class="slider-row"><span class="slider-val" id="km-val">5</span><span class="slider-unit">km</span></div>
        <input type="range" id="km-slider" min="0" max="50" value="5" step="0.5" oninput="document.getElementById('km-val').textContent=this.value">

        <div class="section-label">âš¡ DÃ¹ng Ä‘iá»‡n</div>
        <div class="slider-row"><span class="slider-val" id="elec-val">3</span><span class="slider-unit">giá»</span></div>
        <input type="range" id="elec-slider" min="0" max="12" value="3" step="0.5" oninput="document.getElementById('elec-val').textContent=this.value">

        <div class="section-label">ğŸ½ï¸ Bá»¯a Äƒn</div>
        <div class="opt-grid">
          <div class="opt-btn" onclick="select(this,'food','vegan')"><span class="opt-emoji">ğŸŒ±</span><span class="opt-label">Thuáº§n chay</span></div>
          <div class="opt-btn sel" onclick="select(this,'food','vegetarian')"><span class="opt-emoji">ğŸ¥—</span><span class="opt-label">Rau cá»§</span></div>
          <div class="opt-btn" onclick="select(this,'food','meat')"><span class="opt-emoji">ğŸ–</span><span class="opt-label">Thá»‹t</span></div>
        </div>

        <div class="section-label">ğŸ›ï¸ Äá»“ nhá»±a dÃ¹ng má»™t láº§n</div>
        <div class="counter-row">
          <button class="count-btn" onclick="changeCount(-1)">âˆ’</button>
          <div class="count-num" id="plastic-count">0</div>
          <button class="count-btn" onclick="changeCount(1)">+</button>
          <span style="font-size:12px;color:var(--text-muted)">chai/tÃºi/á»‘ng hÃºt</span>
        </div>

        <div class="section-label">ğŸš¿ Táº¯m</div>
        <div class="slider-row"><span class="slider-val" id="shower-val">8</span><span class="slider-unit">phÃºt</span></div>
        <input type="range" id="shower-slider" min="1" max="30" value="8" oninput="document.getElementById('shower-val').textContent=this.value">
      </div>

      <button class="submit-btn" onclick="submitLog()">ğŸŒ¿ TÃ­nh COâ‚‚ & nháº­n pháº£n há»“i AI</button>
    </div>

    <!-- ========== ANALYZE ========== -->
    <div class="view" id="view-analyze">
      <div class="page-header"><div class="page-title">ğŸ“· PhÃ¢n tÃ­ch rÃ¡c tháº£i</div><div class="page-sub">Chá»¥p áº£nh rÃ¡c Ä‘á»ƒ AI phÃ¢n loáº¡i vÃ  tÃ­nh tÃ¡c Ä‘á»™ng COâ‚‚</div></div>
      <div class="section-pad">
        <div class="upload-zone" onclick="document.getElementById('img-input').click()">
          <input type="file" id="img-input" accept="image/*" onchange="analyzeImage(this)">
          <span class="upload-icon" id="upload-preview-icon">ğŸ“¸</span>
          <div class="upload-text">Nháº¥n Ä‘á»ƒ chá»n áº£nh rÃ¡c</div>
          <div class="upload-sub">AI sáº½ phÃ¢n loáº¡i vÃ  tÃ­nh tÃ¡c Ä‘á»™ng mÃ´i trÆ°á»ng</div>
        </div>
        <div class="analyze-result card" id="analyze-result">
          <div class="card-head">
            <div class="result-category" id="result-cat">ğŸ” Äang phÃ¢n tÃ­ch...</div>
          </div>
          <div id="result-detail"></div>
        </div>
      </div>
    </div>

    <!-- ========== NEWS ========== -->
    <div class="view" id="view-news">
      <div class="page-header"><div class="page-title">ğŸŒ Báº£n tin xanh</div><div class="page-sub">Tin tá»©c mÃ´i trÆ°á»ng Ä‘Æ°á»£c AI tÃ³m táº¯t cho há»c sinh</div></div>
      <div class="section-pad" id="news-list">
        <div style="text-align:center;padding:40px 0;color:var(--text-muted)">
          <div style="font-size:32px;margin-bottom:10px">ğŸŒ¿</div>
          <div class="tip-loading" style="justify-content:center;margin-bottom:8px"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
          <div>Äang táº£i báº£n tin...</div>
        </div>
      </div>
    </div>

    <!-- ========== RANK ========== -->
    <div class="view" id="view-rank">
      <div class="page-header"><div class="page-title">ğŸ† Xáº¿p háº¡ng</div><div class="page-sub">Báº£ng xáº¿p háº¡ng lá»›p há»c cá»§a báº¡n</div></div>
      <div class="section-pad">
        <div class="card" id="rank-list">
          <div style="text-align:center;padding:20px;color:var(--text-muted)">Äang táº£i...</div>
        </div>
      </div>
    </div>

    <!-- ========== PROFILE ========== -->
    <div class="view" id="view-profile">
      <div class="profile-hero">
        <div class="profile-avatar">ğŸ‘¤</div>
        <div class="profile-name" id="profile-name">Láº¡i TÃ¹ng LÃ¢m</div>
        <div class="profile-school" id="profile-school">THPT LÃ½ ThÃ¡i Tá»• - 11Q1</div>
      </div>
      <div class="section-pad">
        <div class="stats-grid" style="margin-bottom:14px">
          <div class="stat-box"><div class="stat-box-val" id="prof-score">72</div><div class="stat-box-label">Green Score TB</div></div>
          <div class="stat-box"><div class="stat-box-val" id="prof-days">30</div><div class="stat-box-label">NgÃ y theo dÃµi</div></div>
          <div class="stat-box"><div class="stat-box-val" id="prof-trees">1.2</div><div class="stat-box-label">CÃ¢y xanh cá»©u</div></div>
        </div>
        <div class="card">
          <div class="card-head"><div class="card-title">ğŸ“Š Tá»•ng quan 30 ngÃ y</div></div>
          <div class="breakdown-row"><span class="breakdown-emoji">ğŸš—</span><span class="breakdown-label">Di chuyá»ƒn</span><div class="breakdown-bar"><div class="breakdown-fill" id="pb-transport" style="width:0%"></div></div><span class="breakdown-val" id="pb-transport-val">0 kg</span></div>
          <div class="breakdown-row"><span class="breakdown-emoji">âš¡</span><span class="breakdown-label">Äiá»‡n</span><div class="breakdown-bar"><div class="breakdown-fill" id="pb-elec" style="width:0%"></div></div><span class="breakdown-val" id="pb-elec-val">0 kg</span></div>
          <div class="breakdown-row"><span class="breakdown-emoji">ğŸ½ï¸</span><span class="breakdown-label">Thá»±c pháº©m</span><div class="breakdown-bar"><div class="breakdown-fill" id="pb-food" style="width:0%"></div></div><span class="breakdown-val" id="pb-food-val">0 kg</span></div>
          <div class="breakdown-row"><span class="breakdown-emoji">ğŸ›ï¸</span><span class="breakdown-label">Nhá»±a</span><div class="breakdown-bar"><div class="breakdown-fill" id="pb-plastic" style="width:0%"></div></div><span class="breakdown-val" id="pb-plastic-val">0 kg</span></div>
          <div class="breakdown-row"><span class="breakdown-emoji">ğŸš¿</span><span class="breakdown-label">NÆ°á»›c</span><div class="breakdown-bar"><div class="breakdown-fill" id="pb-water" style="width:0%"></div></div><span class="breakdown-val" id="pb-water-val">0 kg</span></div>
        </div>
      </div>
    </div>

  </main>
</div>

<!-- MOBILE NAV -->
<nav class="mobile-nav" id="mob-nav">
  <button class="mob-btn active" onclick="go('home',this,true)"><span class="mob-icon">ğŸ </span><span class="mob-label">Home</span></button>
  <button class="mob-btn" onclick="go('news',this,true)"><span class="mob-icon">ğŸŒ</span><span class="mob-label">Tin tá»©c</span></button>
  <button class="mob-btn mob-cta" onclick="go('log',this,true)"><span class="mob-icon">âœï¸</span><span class="mob-label">Ghi</span></button>
  <button class="mob-btn" onclick="go('rank',this,true)"><span class="mob-icon">ğŸ†</span><span class="mob-label">Xáº¿p háº¡ng</span></button>
  <button class="mob-btn" onclick="go('profile',this,true)"><span class="mob-icon">ğŸ‘¤</span><span class="mob-label">Há»“ sÆ¡</span></button>
</nav>
<script src="src/js/index.js"></script>
</body>
</html>
